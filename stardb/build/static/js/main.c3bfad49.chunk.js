(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(41)},26:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),l=n.n(c),i=n(6),o=n(7),u=n(9),s=n(8),m=n(10),p=n(42),h=(n(26),function(e){e.onServiceChange;return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(p.a,{to:"/"},"StarsDB")),r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/planet/"},"Planets")),r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/people/"},"Persons")),r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/starship/"},"Starship")))}),f=n(3),d=n.n(f),v=n(11),E=function(){function e(){var t=this;Object(i.a)(this,e),this._baseUrl="https://swapi.co/api/",this.getAllPeople=Object(v.a)(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("people/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPeople));case 4:case"end":return e.stop()}},e,this)})),this.getPeople=function(){var e=Object(v.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("people/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPeople(a));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this._transformPeople=function(e){var n=t._extractId(e),a="https://starwars-visualguide.com/assets/img/characters/".concat(n,".jpg");return{id:n,height:e.height,mass:e.mass,name:e.name,birthYear:e.birth_year,imgUrl:a}},this.getAllPlanets=Object(v.a)(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("planets/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPlanet));case 4:case"end":return e.stop()}},e,this)})),this.getPlanet=function(){var e=Object(v.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("planets/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPlanet(a));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this._extractId=function(e){return e.url.match(/\/([0-9]*)\/$/)[1]},this._transformPlanet=function(e){var n=t._extractId(e),a="https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg");return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter,imgUrl:a}},this.getAllStarships=Object(v.a)(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("starships/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformStarship));case 4:case"end":return e.stop()}},e,this)})),this.getStarship=function(){var e=Object(v.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("starships/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformStarship(a));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this._transformStarship=function(e){var n=t._extractId(e),a="https://starwars-visualguide.com/assets/img/starships/".concat(n,".jpg");return{id:n,name:e.name,model:e.model,maxSpeed:e.max_atmosphering_speed,imgUrl:a}}}return Object(o.a)(e,[{key:"getResource",value:function(){var e=Object(v.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._baseUrl).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Luke im your father");case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=(n(32),function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null))))}),b=(n(34),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).swapiService=new E,n.state={planet:{},loading:!0,error:!1},n.updatePlanet=function(){var e=Math.floor(20*Math.random())+3;n.swapiService.getPlanet(e).then(function(e){n.setState({planet:e,loading:!1})}).catch(function(e){n.setState({loading:!1,error:!0})})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updatePlanet();var e=this.props.updateInterval;this.interval=setInterval(this.updatePlanet,e)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=e.loading,a=e.error,c=n?r.a.createElement(g,null):null,l=a?r.a.createElement("p",null,"Error"):null,i=n||a?null:r.a.createElement(j,{planet:t});return r.a.createElement("div",{className:"flex-box card"},c,l,i)}}]),t}(r.a.Component));b.defaultProps={updateInterval:1e5};var j=function(e){var t=e.planet,n=t.name,a=t.population,c=t.rotationPeriod,l=t.diameter,i=t.imgUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:i,alt:"planet"}),r.a.createElement("h2",null,n),r.a.createElement("ul",null,r.a.createElement("li",null,"population: ",a),r.a.createElement("li",null,"rotationPeriod: ",c),r.a.createElement("li",null,"diameter: ",l)))},O=function(e){return function(t){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={data:[],loading:!0,error:!1},t}return Object(m.a)(n,t),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getData().then(function(t){e.setState({data:t,loading:!1,error:!1})}).catch(function(t){e.setState({loading:!1,error:!0})})}},{key:"render",value:function(){var t=this.state,n=t.error,a=t.loading,c=t.data;return a?r.a.createElement(g,null):n?r.a.createElement("p",null,"Error"):r.a.createElement(e,Object.assign({},this.props,{data:c}))}}]),n}(r.a.Component)},w=function(e){return function(t){return function(n){return r.a.createElement(t,n,e)}}},x=r.a.createContext(),y=x.Provider,k=x.Consumer,P=function(e){return function(t){return function(n){return r.a.createElement(k,null,function(a){var c=e(a);return r.a.createElement(t,Object.assign({},n,c))})}}},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},I=(n(36),function(e){var t=e.children,n=e.onClickItem,a=e.data.map(function(e){var a=t(e);return r.a.createElement("div",{className:"list-item",onClick:function(){return n(e.id)},key:e.id},a)});return r.a.createElement("div",null,a)});I.defaultProps={onClickItem:function(){}};var _=I,C=S(P(function(e){return{getData:e.getAllPlanets}}),O,w(function(e){var t=e.name,n=e.diameter;return"".concat(t," (").concat(n,")")}))(_),D=S(P(function(e){return{getData:e.getAllPeople}}),O,w(function(e){var t=e.name,n=e.birthYear;return"".concat(t," (").concat(n,")")}))(_),A=S(P(function(e){return{getData:e.getAllStarships}}),O,w(function(e){var t=e.name,n=e.model;return"".concat(t," (").concat(n,")")}))(_),N=function(e){var t=e.item,n=e.field,a=e.label;return r.a.createElement("li",null,r.a.createElement("span",null,a," : ",t[n]))},R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={item:{},loading:!1},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"loadItem",value:function(){var e=this,t=this.props,n=t.itemId,a=t.getData;this.setState({loading:!0}),a(n).then(function(t){return e.setState({item:t,loading:!1})})}},{key:"componentDidMount",value:function(){this.loadItem()}},{key:"componentDidUpdate",value:function(e,t){e.itemId!==this.props.itemId&&this.loadItem()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.item,a=e.item,c=a.name,l=a.imgUrl;return t?r.a.createElement(g,null):this.state.item.name?r.a.createElement("div",null,r.a.createElement("img",{src:l,alt:"people"}),r.a.createElement("h2",null,c),r.a.createElement("ul",null,r.a.Children.map(this.props.children,function(e,t){return r.a.cloneElement(e,{item:n})}))):null}}]),t}(r.a.Component),U=S(P(function(e){return{getData:e.getPlanet}}))(function(e){return r.a.createElement(R,e,r.a.createElement(N,{field:"population",label:"Population"}),r.a.createElement(N,{field:"rotationPeriod",label:"Rotation Period"}),r.a.createElement(N,{field:"diameter",label:"Diameter"}))}),M=S(P(function(e){return{getData:e.getStarship}}))(function(e){return r.a.createElement(R,e,r.a.createElement(N,{field:"model",label:"Model"}),r.a.createElement(N,{field:"maxSpeed",label:"Max speed"}))}),Y=S(P(function(e){return{getData:e.getPeople}}))(function(e){return r.a.createElement(R,e,r.a.createElement(N,{field:"birthYear",label:"Birth Year"}),r.a.createElement(N,{field:"height",label:"Height"}),r.a.createElement(N,{field:"mass",label:"Mass"}))}),B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}]),t}(r.a.Component),J=function(e){var t=e.left,n=e.right;return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-box"},r.a.createElement("div",{className:"card"},t),r.a.createElement("div",{className:"card"},n)))},W=n(46),F=Object(W.a)(function(e){var t=e.match,n=e.history,a=t.params.id,c=r.a.createElement(D,{onClickItem:function(e){return n.push(e)}}),l=null!=a?r.a.createElement(Y,{itemId:a}):r.a.createElement("p",null,"Select item");return r.a.createElement(B,null,r.a.createElement(J,{left:c,right:l}))}),H=Object(W.a)(function(e){var t=e.match,n=e.history,a=t.params.id,c=r.a.createElement(C,{onClickItem:function(e){return n.push(e)}}),l=null!=a?r.a.createElement(U,{itemId:a}):r.a.createElement("p",null,"Select item");return r.a.createElement(B,null,r.a.createElement(J,{left:c,right:l}))}),L=Object(W.a)(function(e){var t=e.match,n=e.history,a=t.params.id,c=r.a.createElement(A,{onClickItem:function(e){return n.push(e)}}),l=null!=a?r.a.createElement(M,{itemId:a}):r.a.createElement("p",null,"Select item");return r.a.createElement(B,null,r.a.createElement(J,{left:c,right:l}))}),$=(n(39),n(44)),q=n(45),z=n(43),G=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={swapiService:new E},n.onServiceChange=function(){},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"16px"}},r.a.createElement(y,{value:this.state.swapiService},r.a.createElement($.a,null,r.a.createElement("div",null,r.a.createElement(h,{onServiceChange:this.onServiceChange}),r.a.createElement(b,null),r.a.createElement(q.a,null,r.a.createElement(z.a,{path:"/",render:function(){return r.a.createElement("h2",{className:"flex-box card"},"Welcome")},exact:!0}),r.a.createElement(z.a,{path:"/people/:id?",component:F}),r.a.createElement(z.a,{path:"/planet/:id?",component:H}),r.a.createElement(z.a,{path:"/starship/:id?",component:L}),r.a.createElement(z.a,{render:function(){return r.a.createElement("h2",{className:"flex-box card"},"Page not found")}}))))))}}]),t}(r.a.Component);l.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.c3bfad49.chunk.js.map